pipeline {
            
                agent {
                    docker { image 'maven:3.6.3-openjdk-11-slim' }
                }
    
                stages {
                    
                    stage('clone') {
                         git credentialsId: 'githubuser',
                                url: 'https://github.com/mzegarras/labmaven.git',
                                branch: 'main'
                    }
                    stage('Build') {
                        
                        

                        steps {

                           

                            sh 'mvn -B verify'
                        }

                        post{
                            success {
                                archiveArtifacts artifacts: 'target/lab04-0.0.1-SNAPSHOT.jar', fingerprint: true, onlyIfSuccessful: true
                            }

                            always {
                                junit 'target/surefire-reports/*.xml'

                                jacoco( 
                                    execPattern: 'target/*.exec',
                                    classPattern: 'target/classes',
                                    sourcePattern: 'src/main/java',
                                    exclusionPattern: 'src/test*'
                                )
                            }
                        }
                    }
                }
            }